Post {
  userId: u32
  id: u64
  title: String
  body: String
}

main() {
  let res, err = async HTTP.get("https://jsonplaceholder.typicode.com/posts")
  
  if err != "" {
    console.log($"HTTP Error: {err}")
  } else if res.status != 200 {
    console.log($"Failed. Status: {res.status}")
  } else {
    let posts: [Post], parseErr = JSON.parse(res.body)
    
    if parseErr != "" {
      console.log($"Parse error: {parseErr}")
    } else {
      console.log($"Success! Parsed {posts.len()} posts")
      if posts.len() > 0 {
        let firstPost = posts[0]
        console.log($"First post: #{firstPost.id} - {firstPost.title}")
      }
    }
  }
}
