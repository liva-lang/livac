// Example: HTTP POST request with JSON body
// Demonstrates posting data to an API endpoint

main() {
    print("=== HTTP POST Example ===")
    print("")
    
    // Create JSON data to send
    let userData = "{\"name\": \"Alice\", \"email\": \"alice@example.com\", \"age\": 28}"
    
    print("Sending POST request to httpbin.org...")
    let response, err = async HTTP.post("https://httpbin.org/post", userData)
    
    if err != "" {
        print($"Error: {err}")
    } else {
        print($"Status: {response.status} {response.statusText}")
        print("")
        
        if response.status == 200 {
            print("POST request successful!")
            print("Response body:")
            
            let data, parseErr = JSON.parse(response.body)
            if parseErr == "" {
                print("JSON response parsed successfully")
            } else {
                print($"Parse error: {parseErr}")
            }
        } else {
            print($"Unexpected status: {response.status}")
        }
    }
}
